---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro'; 

const posts = (await getCollection('blog')).sort(
  (a, b) => new Date(b.data.pubDate).valueOf() - new Date(a.data.pubDate).valueOf()
);
---
<Layout title="All Blog Posts">
  <div class="max-w-7xl mx-auto px-6 py-16">
    <header class="text-center mb-12">
      <h1 class="text-5xl font-bold text-slate-100 mb-4">
        Articles & Insights
      </h1>
      <p class="text-xl text-slate-300 max-w-2xl mx-auto">
        My thoughts on data, automation, and the intersection of technology and marketing, all in one place.
      </p>
    </header>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {posts.map((post) => (
        <a 
          href={`/blog/${post.slug}/`} 
          class="block bg-slate-800 rounded-lg border border-slate-700 hover:border-blue-600 hover:-translate-y-1 transition-all group"
        >
          <img 
            src={post.data.heroImage} 
            alt="" 
            class="rounded-t-lg aspect-video object-cover w-full"
          />
          <div class="p-6">
            <h2 class="text-xl font-bold text-slate-100 group-hover:text-blue-400 mb-2">
              {post.data.title}
            </h2>
            <p class="text-slate-400">
              {(new Date(post.data.pubDate)).toLocaleDateString('en-us', {
                year: 'numeric',
                month: 'short',
                day: 'numeric'
              })}
            </p>
          </div>
        </a>
      ))}
    </div>
  </div>
</Layout>